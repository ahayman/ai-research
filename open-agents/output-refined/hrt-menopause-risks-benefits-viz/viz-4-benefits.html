<!-- Visualization: HRT Benefits - Risk Reduction Percentages -->
<!-- Generated: 2025-12-23 -->
<!-- Type: horizontal-bar-chart -->
<!-- Source: Multiple meta-analyses and WHI data -->

<figure class="data-viz" id="viz-4">
  <div class="viz-container" style="position: relative; width: 100%; max-width: 850px; margin: 0 auto; padding: 20px;">
    <canvas id="chart-benefits"></canvas>
  </div>
  <figcaption>
    <strong>Figure 4:</strong> Evidence-based benefits of hormone replacement therapy when initiated appropriately (within 10 years of menopause or before age 60). HRT remains the most effective treatment for vasomotor symptoms and provides significant protection against osteoporosis and, with early initiation, potentially cardiovascular disease and dementia.
    <span class="viz-source">Sources: WHI Trials (PMC3963523), Cardiovascular Meta-analysis (PMC9178928), Cognition Meta-analysis (PMC10480684)</span>
  </figcaption>
</figure>

<style>
.data-viz {
  margin: 2rem 0;
  padding: 1.5rem;
  background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  border: 1px solid rgba(34, 197, 94, 0.2);
}
.data-viz figcaption {
  text-align: center;
  margin-top: 1.5rem;
  font-size: 0.95rem;
  color: #475569;
  line-height: 1.6;
  max-width: 800px;
  margin-left: auto;
  margin-right: auto;
}
.viz-source {
  display: block;
  font-size: 0.8rem;
  color: #94a3b8;
  margin-top: 0.75rem;
  font-style: italic;
}
</style>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
(function() {
  const ctx = document.getElementById('chart-benefits').getContext('2d');

  const labels = [
    'Vasomotor Symptoms (1 year)',
    'Cardiovascular Disease (early initiation)',
    'Hip Fracture',
    'Dementia (early initiation)',
    'All Fractures',
    'Breast Cancer (ET only)',
    'Diabetes'
  ];

  const data = [64, 50, 34, 32, 24, 23, 17];

  // Create gradient colors
  const gradientColors = data.map((value, index) => {
    const intensity = 0.6 + (value / 100) * 0.4;
    return `rgba(34, 197, 94, ${intensity})`;
  });

  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: labels,
      datasets: [{
        label: 'Risk Reduction (%)',
        data: data,
        backgroundColor: gradientColors,
        borderColor: 'rgba(34, 197, 94, 1)',
        borderWidth: 2,
        borderRadius: 6,
        barThickness: 35
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: true,
      aspectRatio: 1.4,
      indexAxis: 'y',
      plugins: {
        title: {
          display: true,
          text: 'Benefits of HRT: Risk Reduction When Initiated Appropriately',
          font: { size: 18, weight: 'bold' },
          color: '#166534',
          padding: { bottom: 20 }
        },
        legend: {
          display: false
        },
        tooltip: {
          backgroundColor: 'rgba(22, 101, 52, 0.95)',
          titleFont: { size: 14 },
          bodyFont: { size: 13 },
          padding: 12,
          cornerRadius: 8,
          callbacks: {
            label: function(context) {
              return `${context.raw}% lower risk`;
            }
          }
        }
      },
      scales: {
        x: {
          beginAtZero: true,
          max: 70,
          title: {
            display: true,
            text: 'Risk Reduction (%)',
            font: { size: 13, weight: '600' },
            color: '#166534'
          },
          grid: {
            color: 'rgba(34, 197, 94, 0.15)'
          },
          ticks: {
            color: '#166534',
            callback: function(value) {
              return value + '%';
            }
          }
        },
        y: {
          grid: { display: false },
          ticks: {
            color: '#166534',
            font: { size: 12, weight: '500' },
            padding: 8
          }
        }
      }
    }
  });
})();
</script>
