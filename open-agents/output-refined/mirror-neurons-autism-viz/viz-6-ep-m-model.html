<!-- Visualization: EP-M Model - Two Pathways -->
<!-- Generated: 2025-12-20 -->
<!-- Type: flowchart -->
<!-- Source: Hamilton, 2008 -->

<figure class="data-viz" id="viz-ep-m-model">
  <div class="viz-container" style="position: relative; width: 100%; max-width: 900px; margin: 0 auto; padding: 20px;">
    <h3 style="text-align: center; color: #1e293b; margin-bottom: 10px; font-family: system-ui, -apple-system, sans-serif;">The EP-M Model: Two Pathways in the Mirror System</h3>
    <p style="text-align: center; color: #64748b; margin-bottom: 30px; font-size: 0.9rem;">Different routes for goal-directed vs automatic mimicry behaviors</p>

    <svg viewBox="0 0 800 400" width="100%" xmlns="http://www.w3.org/2000/svg" style="font-family: system-ui, -apple-system, sans-serif;">

      <!-- Visual Input -->
      <rect x="30" y="160" width="120" height="80" rx="10" fill="#f1f5f9" stroke="#94a3b8" stroke-width="2"/>
      <text x="90" y="195" text-anchor="middle" font-size="14" font-weight="bold" fill="#334155">Visual Input</text>
      <text x="90" y="215" text-anchor="middle" font-size="11" fill="#64748b">(Observed action)</text>

      <!-- MTG - Middle Temporal Gyrus -->
      <rect x="200" y="160" width="120" height="80" rx="10" fill="#dbeafe" stroke="#3b82f6" stroke-width="2"/>
      <text x="260" y="190" text-anchor="middle" font-size="13" font-weight="bold" fill="#1e40af">MTG</text>
      <text x="260" y="208" text-anchor="middle" font-size="10" fill="#3b82f6">Middle Temporal</text>
      <text x="260" y="222" text-anchor="middle" font-size="10" fill="#3b82f6">Gyrus</text>

      <!-- Arrow from Input to MTG -->
      <defs>
        <marker id="arrow-gray" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
          <polygon points="0 0, 10 3.5, 0 7" fill="#64748b"/>
        </marker>
        <marker id="arrow-green" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
          <polygon points="0 0, 10 3.5, 0 7" fill="#10b981"/>
        </marker>
        <marker id="arrow-purple" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
          <polygon points="0 0, 10 3.5, 0 7" fill="#8b5cf6"/>
        </marker>
      </defs>

      <line x1="150" y1="200" x2="195" y2="200" stroke="#64748b" stroke-width="2" marker-end="url(#arrow-gray)"/>

      <!-- E-P ROUTE (Top) -->
      <!-- IPL -->
      <rect x="380" y="60" width="120" height="80" rx="10" fill="#d1fae5" stroke="#10b981" stroke-width="3"/>
      <text x="440" y="90" text-anchor="middle" font-size="13" font-weight="bold" fill="#047857">IPL</text>
      <text x="440" y="108" text-anchor="middle" font-size="10" fill="#10b981">Inferior Parietal</text>
      <text x="440" y="122" text-anchor="middle" font-size="10" fill="#10b981">Lobule</text>

      <!-- E-P Route label -->
      <rect x="290" y="25" width="180" height="28" rx="14" fill="#10b981"/>
      <text x="380" y="44" text-anchor="middle" font-size="12" font-weight="bold" fill="white">E-P ROUTE (Goal-Directed)</text>

      <!-- IFG from E-P -->
      <rect x="560" y="60" width="120" height="80" rx="10" fill="#d1fae5" stroke="#10b981" stroke-width="3"/>
      <text x="620" y="90" text-anchor="middle" font-size="13" font-weight="bold" fill="#047857">IFG</text>
      <text x="620" y="108" text-anchor="middle" font-size="10" fill="#10b981">Inferior Frontal</text>
      <text x="620" y="122" text-anchor="middle" font-size="10" fill="#10b981">Gyrus</text>

      <!-- Arrow MTG to IPL -->
      <path d="M290 175 Q340 100 375 100" stroke="#10b981" stroke-width="3" fill="none" marker-end="url(#arrow-green)"/>
      <text x="300" y="120" font-size="10" fill="#10b981" font-weight="bold">Emulation</text>

      <!-- Arrow IPL to IFG -->
      <line x1="500" y1="100" x2="555" y2="100" stroke="#10b981" stroke-width="3" marker-end="url(#arrow-green)"/>
      <text x="527" y="90" font-size="10" fill="#10b981" font-weight="bold">Planning</text>

      <!-- M ROUTE (Bottom) -->
      <!-- M Route label -->
      <rect x="290" y="295" width="180" height="28" rx="14" fill="#8b5cf6"/>
      <text x="380" y="314" text-anchor="middle" font-size="12" font-weight="bold" fill="white">M ROUTE (Mimicry)</text>

      <!-- IFG from M route -->
      <rect x="560" y="260" width="120" height="80" rx="10" fill="#ede9fe" stroke="#8b5cf6" stroke-width="3"/>
      <text x="620" y="290" text-anchor="middle" font-size="13" font-weight="bold" fill="#6d28d9">IFG</text>
      <text x="620" y="308" text-anchor="middle" font-size="10" fill="#8b5cf6">Inferior Frontal</text>
      <text x="620" y="322" text-anchor="middle" font-size="10" fill="#8b5cf6">Gyrus</text>

      <!-- Arrow MTG to IFG (direct) -->
      <path d="M320 215 Q450 300 555 300" stroke="#8b5cf6" stroke-width="3" fill="none" marker-end="url(#arrow-purple)"/>
      <text x="420" y="280" font-size="10" fill="#8b5cf6" font-weight="bold">Direct Mimicry</text>

      <!-- Motor Output -->
      <rect x="720" y="160" width="70" height="80" rx="10" fill="#f1f5f9" stroke="#94a3b8" stroke-width="2"/>
      <text x="755" y="195" text-anchor="middle" font-size="12" font-weight="bold" fill="#334155">Motor</text>
      <text x="755" y="212" text-anchor="middle" font-size="12" font-weight="bold" fill="#334155">Output</text>

      <!-- Arrows to Motor Output -->
      <line x1="680" y1="100" x2="720" y2="160" stroke="#10b981" stroke-width="2"/>
      <line x1="680" y1="300" x2="720" y2="240" stroke="#8b5cf6" stroke-width="2"/>

      <!-- Status indicators -->
      <!-- E-P Route: INTACT -->
      <rect x="560" y="150" width="120" height="25" rx="5" fill="#d1fae5" stroke="#10b981" stroke-width="2"/>
      <text x="620" y="167" text-anchor="middle" font-size="11" font-weight="bold" fill="#047857">INTACT in Autism</text>

      <!-- M Route: May differ -->
      <rect x="560" y="345" width="120" height="25" rx="5" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
      <text x="620" y="362" text-anchor="middle" font-size="11" font-weight="bold" fill="#b45309">May Differ in Autism</text>

    </svg>

    <!-- Explanation boxes -->
    <div style="display: flex; flex-wrap: wrap; gap: 20px; justify-content: center; margin-top: 25px;">
      <div style="flex: 1; min-width: 280px; max-width: 400px; background: #d1fae5; border-radius: 12px; padding: 18px; border-left: 4px solid #10b981;">
        <h4 style="color: #047857; margin: 0 0 10px; font-size: 1rem;">E-P Route (Emulation-Planning)</h4>
        <ul style="margin: 0; padding-left: 20px; color: #065f46; font-size: 0.85rem; line-height: 1.6;">
          <li>Processes goal-directed actions</li>
          <li>Extracts the INTENTION behind actions</li>
          <li>Allows copying the goal, not exact movements</li>
          <li><strong>Appears INTACT in autism</strong></li>
        </ul>
      </div>

      <div style="flex: 1; min-width: 280px; max-width: 400px; background: #ede9fe; border-radius: 12px; padding: 18px; border-left: 4px solid #8b5cf6;">
        <h4 style="color: #6d28d9; margin: 0 0 10px; font-size: 1rem;">M Route (Mimicry)</h4>
        <ul style="margin: 0; padding-left: 20px; color: #5b21b6; font-size: 0.85rem; line-height: 1.6;">
          <li>Direct route for automatic copying</li>
          <li>Handles non-goal-directed movements</li>
          <li>Controls spontaneous social mimicry</li>
          <li><strong>May function differently in autism</strong></li>
        </ul>
      </div>
    </div>
  </div>

  <figcaption style="text-align: center; margin-top: 1.5rem; font-size: 0.9rem; color: #666; font-family: system-ui, -apple-system, sans-serif;">
    <strong>Figure 6:</strong> The EP-M model proposes two pathways - explaining why goal imitation is intact while automatic mimicry may differ
    <span style="display: block; font-size: 0.8rem; color: #999; margin-top: 0.5rem;">Source: Hamilton, 2008, Quarterly Journal of Experimental Psychology</span>
  </figcaption>
</figure>

<style>
.data-viz {
  margin: 2rem 0;
  padding: 1.5rem;
  background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
  border-radius: 16px;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  font-family: system-ui, -apple-system, sans-serif;
}
</style>
