<!-- Visualization: PEERS Program Long-Term Outcomes -->
<!-- Generated: 2025-12-17 -->
<!-- Type: line-chart -->
<!-- Source: UCLA PEERS Research -->

<figure class="data-viz" id="viz-4">
  <div class="viz-container" style="position: relative; width: 100%; max-width: 650px; margin: 0 auto;">
    <canvas id="chart-peers-outcomes"></canvas>
  </div>
  <figcaption>
    <strong>Figure 4:</strong> PEERS Program: Long-Term Social Skills Retention
    <span class="viz-source">Source: UCLA PEERS Research Program, multiple longitudinal studies</span>
  </figcaption>
</figure>

<style>
.data-viz {
  margin: 2rem 0;
  padding: 1.5rem;
  background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
}
.data-viz figcaption {
  text-align: center;
  margin-top: 1.25rem;
  font-size: 0.95rem;
  color: #475569;
}
.viz-source {
  display: block;
  font-size: 0.8rem;
  color: #94a3b8;
  margin-top: 0.5rem;
}
</style>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
(function() {
  const ctx = document.getElementById('chart-peers-outcomes').getContext('2d');

  new Chart(ctx, {
    type: 'line',
    data: {
      labels: ['Baseline', 'Post-Treatment\n(16 weeks)', '1-Year\nFollow-up', '3-5 Year\nFollow-up'],
      datasets: [{
        label: 'Social Skills Score',
        data: [45, 72, 70, 68],
        backgroundColor: 'rgba(139, 92, 246, 0.2)',
        borderColor: 'rgba(139, 92, 246, 1)',
        borderWidth: 3,
        fill: true,
        tension: 0.3,
        pointBackgroundColor: 'rgba(139, 92, 246, 1)',
        pointBorderColor: '#fff',
        pointBorderWidth: 2,
        pointRadius: 8,
        pointHoverRadius: 10
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: true,
      plugins: {
        title: {
          display: true,
          text: 'PEERS Program: Social Skills Improvement Over Time',
          font: { size: 15, weight: 'bold' },
          color: '#1e293b',
          padding: { bottom: 20 }
        },
        legend: {
          display: false
        },
        tooltip: {
          callbacks: {
            label: function(context) {
              return 'Score: ' + context.raw;
            },
            afterLabel: function(context) {
              const improvements = ['', '+60% improvement', '-3% from peak', '-6% from peak'];
              return improvements[context.dataIndex] || '';
            }
          }
        },
        annotation: {
          annotations: {
            improvement: {
              type: 'label',
              xValue: 1,
              yValue: 65,
              backgroundColor: 'rgba(139, 92, 246, 0.1)',
              content: ['+60% improvement'],
              font: { size: 11 },
              color: '#7c3aed'
            }
          }
        }
      },
      scales: {
        y: {
          beginAtZero: true,
          max: 100,
          title: {
            display: true,
            text: 'Social Skills Score',
            font: { size: 12, weight: '500' },
            color: '#64748b'
          },
          ticks: { color: '#64748b' },
          grid: { color: 'rgba(148, 163, 184, 0.2)' }
        },
        x: {
          ticks: {
            color: '#475569',
            font: { size: 11 },
            maxRotation: 0
          },
          grid: { display: false }
        }
      }
    }
  });
})();
</script>

<div style="display: flex; gap: 20px; margin-top: 20px; flex-wrap: wrap; justify-content: center;">
  <div style="background: #f3e8ff; padding: 12px 16px; border-radius: 8px; text-align: center; flex: 1; min-width: 140px; max-width: 180px;">
    <div style="font-size: 24px; font-weight: bold; color: #7c3aed;">+60%</div>
    <div style="font-size: 12px; color: #6b21a8;">Initial Improvement</div>
  </div>
  <div style="background: #f3e8ff; padding: 12px 16px; border-radius: 8px; text-align: center; flex: 1; min-width: 140px; max-width: 180px;">
    <div style="font-size: 24px; font-weight: bold; color: #7c3aed;">95%</div>
    <div style="font-size: 12px; color: #6b21a8;">Retained at 3-5 Years</div>
  </div>
  <div style="background: #f3e8ff; padding: 12px 16px; border-radius: 8px; text-align: center; flex: 1; min-width: 140px; max-width: 180px;">
    <div style="font-size: 24px; font-weight: bold; color: #7c3aed;">31</div>
    <div style="font-size: 12px; color: #6b21a8;">Controlled Trials</div>
  </div>
</div>
